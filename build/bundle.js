var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(o)}function s(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}const c="undefined"!=typeof window;let a=c?()=>window.performance.now():()=>Date.now(),d=c?t=>requestAnimationFrame(t):t;const f=new Set;function h(t){f.forEach((e=>{e.c(t)||(f.delete(e),e.f())})),0!==f.size&&d(h)}function p(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function m(t){t.parentNode.removeChild(t)}function $(t){return document.createElement(t)}function w(){return t=" ",document.createTextNode(t);var t}function y(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}let x;function _(t){x=t}const k=[],E=[],M=[],A=[],C=Promise.resolve();let z=!1;function j(t){M.push(t)}let I=!1;const O=new Set;function W(){if(!I){I=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];_(e),N(e.$$)}for(_(null),k.length=0;E.length;)E.pop()();for(let t=0;t<M.length;t+=1){const e=M[t];O.has(e)||(O.add(e),e())}M.length=0}while(k.length);for(;A.length;)A.pop()();z=!1,I=!1,O.clear()}}function N(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const P=new Set;let S;function T(t,e){t&&t.i&&(P.delete(t),t.i(e))}function X(t,e,n,o){if(t&&t.o){if(P.has(t))return;P.add(t),S.c.push((()=>{P.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const B="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Y(t,e,n,r){const{fragment:l,on_mount:u,on_destroy:c,after_update:a}=t.$$;l&&l.m(e,n),r||j((()=>{const e=u.map(o).filter(s);c?c.push(...e):i(e),t.$$.on_mount=[]})),a.forEach(j)}function D(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function F(t,e){-1===t.$$.dirty[0]&&(k.push(t),z||(z=!0,C.then(W)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function L(e,n,o,s,l,u,c=[-1]){const a=x;_(e);const d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:r(),dirty:c,skip_bound:!1};let f=!1;if(d.ctx=o?o(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),f&&F(e,t)),n})):[],d.update(),f=!0,i(d.before_update),d.fragment=!!s&&s(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(m)}else d.fragment&&d.fragment.c();n.intro&&T(e.$$.fragment),Y(e,n.target,n.anchor,n.customElement),W()}_(a)}class R{$destroy(){D(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function q(e){let n,o,r,i,s,l,u,c;return{c(){n=$("div"),o=$("div"),r=$("object"),i=w(),s=$("div"),b(r,"type","image/svg+xml"),b(r,"data",e[2]),v(r,"width","100%"),v(r,"height","100%"),b(r,"title","page"),b(s,"style",l=`background: ${e[5]}; pointer-events: none;`),b(s,"class","page-shadow svelte-134cm11"),b(o,"style",u=`position: relative; width: ${e[0]}px; height: 100%; overflow: hidden;`),b(n,"class","page svelte-134cm11"),b(n,"style",c=`z-index: ${e[1]}; left:${e[3]}; width: ${e[4]}%; overflow: hidden;`)},m(t,e){g(t,n,e),p(n,o),p(o,r),p(o,i),p(o,s)},p(t,[e]){4&e&&b(r,"data",t[2]),32&e&&l!==(l=`background: ${t[5]}; pointer-events: none;`)&&b(s,"style",l),1&e&&u!==(u=`position: relative; width: ${t[0]}px; height: 100%; overflow: hidden;`)&&b(o,"style",u),26&e&&c!==(c=`z-index: ${t[1]}; left:${t[3]}; width: ${t[4]}%; overflow: hidden;`)&&b(n,"style",c)},i:t,o:t,d(t){t&&m(n)}}}function H(t,e,n){let o,r,i,s,l,u,{doc:c}=e,{number:a}=e,{progress:d}=e,{pageWidth:f}=e,{shadowColor:h}=e,{shadowIntensity:p}=e,{shadow:g}=e;return t.$$set=t=>{"doc"in t&&n(6,c=t.doc),"number"in t&&n(7,a=t.number),"progress"in t&&n(8,d=t.progress),"pageWidth"in t&&n(0,f=t.pageWidth),"shadowColor"in t&&n(9,h=t.shadowColor),"shadowIntensity"in t&&n(10,p=t.shadowIntensity),"shadow"in t&&n(11,g=t.shadow)},t.$$.update=()=>{128&t.$$.dirty&&n(12,o=a%2==0),4224&t.$$.dirty&&n(1,r=o?-a:a),192&t.$$.dirty&&n(2,i=`/documents/${c}/${a}.svg`),4352&t.$$.dirty&&n(3,s=o?"50%":100*(1-d)+"%"),4352&t.$$.dirty&&n(4,l=o?50*(1-d):50*d),7936&t.$$.dirty&&n(5,u=g?o?`linear-gradient(90deg, #${h} 0%, rgba(0,0,0,0) ${p}%)`:`linear-gradient(270deg, #${h} ${100*(1-d)}%, rgba(0,0,0,0) ${100*(1-d)+p}%)`:"#00000000")},[f,r,i,s,l,u,c,a,d,h,p,g,o]}class U extends R{constructor(t){super(),L(this,t,H,q,l,{doc:6,number:7,progress:8,pageWidth:0,shadowColor:9,shadowIntensity:10,shadow:11})}}const G=[];function J(t){const e=t-1;return e*e*e+1}function K(t){return"[object Date]"===Object.prototype.toString.call(t)}function Q(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map(((e,n)=>Q(t[n],e)));return t=>n.map((e=>e(t)))}if("object"===n){if(!t||!e)throw new Error("Object cannot be null");if(K(t)&&K(e)){t=t.getTime();const n=(e=e.getTime())-t;return e=>new Date(t+e*n)}const n=Object.keys(e),o={};return n.forEach((n=>{o[n]=Q(t[n],e[n])})),t=>{const e={};return n.forEach((n=>{e[n]=o[n](t)})),e}}if("number"===n){const n=e-t;return e=>t+e*n}throw new Error(`Cannot interpolate ${n} values`)}function V(o,r={}){const i=function(e,n=t){let o;const r=[];function i(t){if(l(e,t)&&(e=t,o)){const t=!G.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),G.push(n,e)}if(t){for(let t=0;t<G.length;t+=2)G[t][0](G[t+1]);G.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(s,l=t){const u=[s,l];return r.push(u),1===r.length&&(o=n(i)||t),s(e),()=>{const t=r.indexOf(u);-1!==t&&r.splice(t,1),0===r.length&&(o(),o=null)}}}}(o);let s,u=o;function c(t,l){if(null==o)return i.set(o=t),Promise.resolve();u=t;let c=s,p=!1,{delay:g=0,duration:m=400,easing:$=e,interpolate:w=Q}=n(n({},r),l);if(0===m)return c&&(c.abort(),c=null),i.set(o=u),Promise.resolve();const y=a()+g;let b;return s=function(t){let e;return 0===f.size&&d(h),{promise:new Promise((n=>{f.add(e={c:t,f:n})})),abort(){f.delete(e)}}}((e=>{if(e<y)return!0;p||(b=w(o,t),"function"==typeof m&&(m=m(o,t)),p=!0),c&&(c.abort(),c=null);const n=e-y;return n>m?(i.set(o=t),!1):(i.set(o=b($(n/m))),!0)})),s.promise}return{set:c,update:(t,e)=>c(t(u,o),e),subscribe:i.subscribe}}const{window:Z}=B;function tt(t,e,n){const o=t.slice();return o[27]=e[n],o[29]=n,o}function et(t){let e,n;return e=new U({props:{doc:t[7],number:t[29],shadow:!(0==t[29]||0!=(t[29]==t[8]-1&&(t[8]-1)%2)),shadowColor:t[9],shadowIntensity:t[10],progress:Math.max(Math.min(t[6]-Math.floor(.5*t[29]),1),0),pageWidth:.98*t[4]*.5}}),{c(){var t;(t=e.$$.fragment)&&t.c()},m(t,o){Y(e,t,o),n=!0},p(t,n){const o={};64&n&&(o.progress=Math.max(Math.min(t[6]-Math.floor(.5*t[29]),1),0)),16&n&&(o.pageWidth=.98*t[4]*.5),e.$set(o)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){X(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function nt(e){let n,o,r;return{c(){n=$("div"),b(n,"class","noselect svelte-1b0sgk0"),b(n,"style",`z-index: ${e[8]+2}; width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;`)},m(t,i){g(t,n,i),o||(r=[y(n,"mousemove",e[12]),y(n,"mouseleave",e[12]),y(n,"mouseup",e[12])],o=!0)},p:t,d(t){t&&m(n),o=!1,i(r)}}}function ot(t){let e,n,o,r,s,l,u,c,a,d,f;j(t[13]);let h=Array(t[8]),v=[];for(let e=0;e<h.length;e+=1)v[e]=et(tt(t,h,e));const x=t=>X(v[t],1,1,(()=>{v[t]=null}));let _=t[3]&&nt(t);return{c(){e=w(),n=$("main");for(let t=0;t<v.length;t+=1)v[t].c();o=w(),r=$("div"),s=w(),_&&_.c(),l=w(),u=$("div"),b(r,"class","noselect svelte-1b0sgk0"),b(r,"style",`z-index: ${t[8]+1}; width: 3.5%; height: 100%; position: absolute; top: 0px; left: 0px;`),b(u,"class","noselect svelte-1b0sgk0"),b(u,"style",`z-index: ${t[8]+1}; width: 3.5%; height: 100%; position: absolute; top: 0px; left: 96.5%;`),b(n,"style",c=`position: relative; width: ${.98*t[4]}px; height: ${.98*t[5]}px; overflow: hidden; z-index: -100000;`)},m(i,c){g(i,e,c),g(i,n,c);for(let t=0;t<v.length;t+=1)v[t].m(n,null);p(n,o),p(n,r),p(n,s),_&&_.m(n,null),p(n,l),p(n,u),t[14](n),a=!0,d||(f=[y(Z,"resize",t[13]),y(document.body,"mousemove",t[12]),y(r,"mousemove",t[12]),y(r,"mousedown",t[12]),y(r,"mouseup",t[12]),y(u,"mousemove",t[12]),y(u,"mousedown",t[12]),y(u,"mouseup",t[12])],d=!0)},p(t,[e]){if(2e3&e){let r;for(h=Array(t[8]),r=0;r<h.length;r+=1){const i=tt(t,h,r);v[r]?(v[r].p(i,e),T(v[r],1)):(v[r]=et(i),v[r].c(),T(v[r],1),v[r].m(n,o))}for(S={r:0,c:[],p:S},r=h.length;r<v.length;r+=1)x(r);S.r||i(S.c),S=S.p}t[3]?_?_.p(t,e):(_=nt(t),_.c(),_.m(n,l)):_&&(_.d(1),_=null),(!a||48&e&&c!==(c=`position: relative; width: ${.98*t[4]}px; height: ${.98*t[5]}px; overflow: hidden; z-index: -100000;`))&&b(n,"style",c)},i(t){if(!a){for(let t=0;t<h.length;t+=1)T(v[t]);a=!0}},o(t){v=v.filter(Boolean);for(let t=0;t<v.length;t+=1)X(v[t]);a=!1},d(o){o&&m(e),o&&m(n),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(v,o),_&&_.d(),t[14](null),d=!1,i(f)}}}function rt(t,e,n){let o,r,i;const s=new URLSearchParams(window.location.search),l=s.get("doc"),c=Number.parseFloat(s.get("ratio")),a=Number.parseInt(s.get("pages")),d=s.get("shadow"),f=Number.parseFloat(s.get("shadowIntensity"));let h,p,g,m=.1,$=!1,w=0,y=!1,b=V(0,{easing:J,duration:(t,e)=>$?1:Math.abs(t-e)/m*1e3+1});u(t,b,(t=>n(6,i=t)));let v=0,x={x:0,y:0,down:!1};function _(){let t=h.getBoundingClientRect();return(x.x-t.left)/t.width}function k(){y||(m=2,y=!0,b.update((t=>(v=Math.round(t),v))).then((()=>{y=!1})),n(3,$=!1))}return t.$$.update=()=>{3&t.$$.dirty&&n(4,o=Math.min(g*(2*c),p)),3&t.$$.dirty&&n(5,r=Math.min(p/(2*c),g))},[p,g,h,$,o,r,i,l,a,d,f,b,function(t){if(!h)return;let e=h.getBoundingClientRect();if(t.clientX-e.left<0)x.x-e.left>=0&&k();else if(t.clientX-e.left>e.width)x.x-e.left<=e.width&&k();else if(t.clientY-e.top<0)x.y-e.top<0&&k();else if(t.clientY-e.top>e.height)x.y-e.top<=e.height&&k();else{var o=x.x,r=x.down;x={x:t.clientX,y:t.clientY,down:0==(1&t.buttons)},r&&0==(1&t.buttons)?k():!r&&(1&t.buttons)>0&&function(){if($)return;let t=_();b.update((e=>(t>.965&&e<Math.floor(.5*a)?(n(3,$=!0),w=-1):t<.035&&e>0&&(n(3,$=!0),w=1),e)))}(),o!=t.clientX&&function(){if(y)return;let t=_();$?b.update((e=>w<0?v+(1-t):v-t)):(m=.05,b.update((e=>t>.965&&e<Math.floor(.5*a)?v+(1-t):t<.03&&e>0?v-t:Math.round(e))))}()}x={x:t.clientX,y:t.clientY,down:(1&t.buttons)>0}},function(){n(0,p=Z.innerWidth),n(1,g=Z.innerHeight)},function(t){E[t?"unshift":"push"]((()=>{h=t,n(2,h)}))}]}return new class extends R{constructor(t){super(),L(this,t,rt,ot,l,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
